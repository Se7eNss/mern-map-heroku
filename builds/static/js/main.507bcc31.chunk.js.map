{"version":3,"sources":["components/user/Register.jsx","components/user/Login.jsx","App.js","index.js"],"names":["Register","setShowRegister","useState","success","setSuccess","error","setError","nameRef","useRef","emailRef","passwordRef","handleSubmit","e","a","preventDefault","newUser","username","current","value","email","password","axios","post","setTimeout","className","src","alt","onSubmit","type","placeholder","ref","Cancel","onClick","Login","setShowLogin","setCurrentUsername","myStorage","usernameRef","user","res","data","console","log","setItem","autoFocus","min","App","window","localStorage","getItem","currentUsername","pins","setPins","currentPlaceId","setCurrentPlaceId","newPlace","setNewPlace","title","setTitle","desc","setDesc","star","setStar","latitude","longitude","zoom","viewport","setViewport","showRegister","showLogin","newPin","rating","lat","long","useEffect","get","allPins","getPins","style","height","width","mapboxApiAccessToken","transitionDuration","mapStyle","onViewportChange","onDblClick","lngLat","map","p","offsetLeft","offsetTop","Room","fontSize","color","cursor","id","_id","closeButton","closeOnClick","onClose","anchor","Array","fill","Star","format","createdAt","onChange","target","removeItem","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.507bcc31.chunk.js","sourcesContent":["import React,{ useRef,useState} from 'react'\nimport axios from 'axios'\n\nimport  './register.css'\nimport {Cancel} from '@material-ui/icons'\n\nconst Register = ({ setShowRegister }) => {\n    const [success , setSuccess] =useState(null)\n    const [error , setError] = useState(null)\n    const nameRef = useRef();\n    const emailRef = useRef();\n    const passwordRef = useRef();\n\n\n    const handleSubmit = async(e)=>{\n        e.preventDefault()\n        const newUser = {\n            username : nameRef.current.value,\n            email:emailRef.current.value,\n            password:passwordRef.current.value\n        }\n        try {\n           axios.post('/register',newUser);\n           setSuccess(true)\n        } catch (error) {\n            setError(true)\n        }\n       \n        setTimeout(() => {\n            setShowRegister(false)\n        }, 2000);\n        \n    }\n\n    return (\n    <div className=\"bg\">\n        <div className=\"registerContainer\">\n            <div className=\"logo\">\n                <img src=\"/images/logo.png\" alt=\"logo\"  />\n            </div>\n            <form onSubmit={handleSubmit}>\n                <input type=\"text\" placeholder=\"Username\" ref={nameRef}/>\n                <input type=\"email\" placeholder=\"Email\" ref={emailRef} />\n                <input type=\"password\" placeholder=\"Password\"  ref={passwordRef}/>\n                <button type=\"submit\">Register</button>\n                {success && (<span className=\"success\">Success, you can login</span>) }\n                {error && (<span className=\"error\">Something went wrong</span>)}\n            </form>\n            <Cancel\n                className=\"registerCancel\"\n                onClick={() => setShowRegister(false)}\n            />\n\n        </div>\n        \n    </div>\n    )\n}\n\nexport default Register\n","import { Cancel } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { useRef, useState } from \"react\";\nimport \"./login.css\";\n\nexport default function Login({ setShowLogin, setCurrentUsername,myStorage }) {\n  const [error, setError] = useState(false);\n  const usernameRef = useRef();\n  const passwordRef = useRef();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const user = {\n      username: usernameRef.current.value,\n      password: passwordRef.current.value,\n    };\n    try {\n      const res = await axios.post(\"/login\", user);\n      setCurrentUsername(res.data);\n      console.log(res.data.user.username)\n      myStorage.setItem('user', res.data.user.username);\n      setShowLogin(false)\n    } catch (err) {\n      setError(true);\n    }\n  };\n\n  return (\n  <div className=\"bg\">   \n    <div className=\"loginContainer\">\n     <div className=\"logo\">\n                <img src=\"/images/logo.png\" alt=\"logo\"  />\n            </div>\n      <form onSubmit={handleSubmit}>\n        <input autoFocus placeholder=\"username\" ref={usernameRef} />\n        <input\n          type=\"password\"\n          min=\"6\"\n          placeholder=\"password\"\n          ref={passwordRef}\n        />\n        <button className=\"loginBtn\" type=\"submit\">\n          Login\n        </button>\n        {error && <span className=\"failure\">Something went wrong!</span>}\n      </form>\n      <Cancel className=\"loginCancel\" onClick={() => setShowLogin(false)} />\n    </div>\n  </div>\n  );\n}","import \"./app.css\";\nimport ReactMapGL, { Marker, Popup } from \"react-map-gl\";\nimport { useEffect, useState } from \"react\";\nimport { Room, Star } from \"@material-ui/icons\";\nimport axios from \"axios\";\nimport { format } from \"timeago.js\";\nimport Register from \"./components/user/Register\";\nimport Login from \"./components/user/Login\";\n\n\n\n\nfunction App() {\n  const myStorage = window.localStorage;\n  const [currentUsername, setCurrentUsername] = useState(myStorage.getItem(\"user\"));\n  const [pins, setPins] = useState([]);\n  const [currentPlaceId, setCurrentPlaceId] = useState(null);\n  const [newPlace, setNewPlace] = useState(null);\n  const [title, setTitle] = useState(null);\n  const [desc, setDesc] = useState(null);\n  const [star, setStar] = useState(0);\n  const [viewport, setViewport] = useState({\n    latitude: 47.040182,\n    longitude: 17.071727,\n    zoom: 4,\n  });\n  const [showRegister, setShowRegister] = useState(false);\n  const [showLogin, setShowLogin] = useState(false);\n\n  const handleMarkerClick = (id, lat, long) => {\n    setCurrentPlaceId(id);\n    setViewport({ ...viewport, latitude: lat, longitude: long });\n  };\n\n  const handleAddClick = (e) => {\n    const [longitude, latitude] = e.lngLat;\n    setNewPlace({\n      lat: latitude,\n      long: longitude,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const newPin = {\n      username: currentUsername,\n      title,\n      desc,\n      rating: star,\n      lat: newPlace.lat,\n      long: newPlace.long,\n    };\n\n    try {\n      const res = await axios.post(\"/pins\", newPin);\n      setPins([...pins, res.data]);\n      setNewPlace(null);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    const getPins = async () => {\n      try {\n        const allPins = await axios.get(\"/pins\");\n        setPins(allPins.data.pins);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getPins();\n  }, []);\n\n  const handleLogout = () => {\n    setCurrentUsername(null);\n    myStorage.removeItem(\"user\");\n  };\n\n  return (\n    \n    <div style={{ height: \"100vh\", width: \"100%\" }}>\n      <ReactMapGL\n        {...viewport}\n        mapboxApiAccessToken=\"pk.eyJ1Ijoic2U3ZW5zIiwiYSI6ImNrcmpmbGF0czEydGEyb3BndXpnemZnYnUifQ.QRQXLCToGvOHwrrYxR29Ew\"\n        width=\"100%\"\n        height=\"100%\"\n        transitionDuration=\"100\"\n        mapStyle=\"mapbox://styles/se7ens/ckrjhrly78bpr19nzwh89oxzu\"\n        onViewportChange={(viewport) => setViewport(viewport)}\n        onDblClick={currentUsername && handleAddClick}\n        \n      >\n        {pins.map((p) => (\n          <>\n            <Marker\n              latitude={p.lat}\n              longitude={p.long}\n              offsetLeft={-3.5 * viewport.zoom}\n              offsetTop={-7 * viewport.zoom}\n            >\n              <Room\n                style={{\n                  fontSize: 7 * viewport.zoom,\n                  color:\n                    currentUsername === p.username ? \"tomato\" : \"slateblue\",\n                  cursor: \"pointer\",\n                }}\n                onClick={() => handleMarkerClick(p._id, p.lat, p.long)}\n              />\n            </Marker>\n            {p._id === currentPlaceId && (\n              <Popup\n                key={p._id}\n                latitude={p.lat}\n                longitude={p.long}\n                closeButton={true}\n                closeOnClick={false}\n                onClose={() => setCurrentPlaceId(null)}\n                anchor=\"left\"\n              >\n                <div className=\"card\">\n                  <label>Place</label>\n                  <h4 className=\"place\">{p.title}</h4>\n                  <label>Review</label>\n                  <p className=\"desc\">{p.desc}</p>\n                  <label>Rating</label>\n                  <div className=\"stars\">\n                    {Array(p.rating).fill(<Star className=\"star\" />)}\n                  </div>\n                  <label>Information</label>\n                  <span className=\"username\">\n                    Created by <b>{p.username}</b>\n                  </span>\n                  <span className=\"date\">{format(p.createdAt)}</span>\n                </div>\n              </Popup>\n            )}\n          </>\n        ))}\n        {newPlace && (\n          <>\n            <Marker\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              offsetLeft={-3.5 * viewport.zoom}\n              offsetTop={-7 * viewport.zoom}\n            >\n              <Room\n                style={{\n                  fontSize: 7 * viewport.zoom,\n                  color: \"tomato\",\n                  cursor: \"pointer\",\n                }}\n              />\n            </Marker>\n            <Popup\n              latitude={newPlace.lat}\n              longitude={newPlace.long}\n              closeButton={true}\n              closeOnClick={false}\n              onClose={() => setNewPlace(null)}\n              anchor=\"left\"\n            >\n              <div>\n                <form onSubmit={handleSubmit}>\n                  <label>Title</label>\n                  <input\n                    placeholder=\"Enter a title\"\n                    autoFocus\n                    onChange={(e) => setTitle(e.target.value)}\n                  />\n                  <label>Description</label>\n                  <textarea\n                    placeholder=\"Say us something about this place.\"\n                    onChange={(e) => setDesc(e.target.value)}\n                  />\n                  <label>Rating</label>\n                  <select onChange={(e) => setStar(e.target.value)}>\n                    <option value=\"1\">1</option>\n                    <option value=\"2\">2</option>\n                    <option value=\"3\">3</option>\n                    <option value=\"4\">4</option>\n                    <option value=\"5\">5</option>\n                  </select>\n                  <button type=\"submit\" className=\"submitButton\">\n                    Add Pin\n                  </button>\n                </form>\n              </div>\n            </Popup>\n          </>\n        )}\n        {currentUsername ? (\n          <button className=\"button logout\" onClick={handleLogout}>\n            Log out\n          </button>\n        ) : (\n          <div className=\"buttons\">\n            <button className=\"button login\" onClick={() => setShowLogin(true)}>\n              Log in\n            </button>\n            <button\n              className=\"button register\"\n              onClick={() => setShowRegister(true)}\n            >\n              Register\n            </button>\n          </div>\n        )}\n        {showRegister && <Register setShowRegister={setShowRegister} />}\n        {showLogin && (\n          <Login\n            setShowLogin={setShowLogin}\n            setCurrentUsername={setCurrentUsername}\n            myStorage={myStorage}\n          />\n        )}\n      </ReactMapGL>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './app.css';\nimport App from './App';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n  <App />\n</React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}